jQuery(function(){"ace"in window||(window.ace={}),window.ace.click_event=jQuery.fn.tap?"tap":"click"}),function(t,e){var n="multiple"in document.createElement("INPUT"),i="FileList"in window,l="FileReader"in window,a=function(e,n){var i=this;this.settings=t.extend({},t.fn.ace_file_input.defaults,n),this.jQueryelement=t(e),this.element=e,this.disabled=!1,this.can_reset=!0,this.jQueryelement.on("change.ace_inner_call",function(t,e){if(!0!==e)return o.call(i)}),this.jQueryelement.wrap('<div class="ace-file-input" />'),this.apply_settings()};a.error={FILE_LOAD_FAILED:1,IMAGE_LOAD_FAILED:2,THUMBNAIL_FAILED:3},a.prototype.apply_settings=function(){var t=this,e=!!this.settings.icon_remove;this.multi=this.jQueryelement.attr("multiple")&&n,this.well_style="well"==this.settings.style,this.well_style?this.jQueryelement.parent().addClass("ace-file-multiple"):this.jQueryelement.parent().removeClass("ace-file-multiple"),this.jQueryelement.parent().find(":not(input[type=file])").remove(),this.jQueryelement.after('<label data-title="'+this.settings.btn_choose+'"><span data-title="'+this.settings.no_file+'">'+(this.settings.no_icon?'<i class="'+this.settings.no_icon+'"></i>':"")+"</span></label>"+(e?'<a class="remove" href="#"><i class="'+this.settings.icon_remove+'"></i></a>':"")),this.jQuerylabel=this.jQueryelement.next(),this.jQuerylabel.on("click",function(){this.disabled||t.element.disabled||t.jQueryelement.attr("readonly")||t.jQueryelement.click()}),e&&this.jQuerylabel.next("a").on(ace.click_event,function(){if(!t.can_reset)return!1;var e=!0;return t.settings.before_remove&&(e=t.settings.before_remove.call(t.element)),!!e&&t.reset_input()}),this.settings.droppable&&i&&s.call(this)},a.prototype.show_file_list=function(e){var n=void 0===e?this.jQueryelement.data("ace_input_files"):e;if(n&&0!=n.length){this.well_style&&(this.jQuerylabel.find("span").remove(),this.settings.btn_change||this.jQuerylabel.addClass("hide-placeholder")),this.jQuerylabel.attr("data-title",this.settings.btn_change).addClass("selected");for(var i=0;i<n.length;i++){var a="string"==typeof n[i]?n[i]:t.trim(n[i].name),s=a.lastIndexOf("\\")+1;0==s&&(s=a.lastIndexOf("/")+1),a=a.substr(s);var o="icon-file";if(/\.(jpe?g|png|gif|svg|bmp|tiff?)jQuery/i.test(a)?o="icon-picture":/\.(mpe?g|flv|mov|avi|swf|mp4|mkv|webm|wmv|3gp)jQuery/i.test(a)?o="icon-film":/\.(mp3|ogg|wav|wma|amr|aac)jQuery/i.test(a)&&(o="icon-music"),this.well_style){this.jQuerylabel.append('<span data-title="'+a+'"><i class="'+o+'"></i></span>');var c=t.trim(n[i].type);if(l&&this.settings.thumbnail&&(c.length>0&&c.match("image")||0==c.length&&"icon-picture"==o)){var d=this;t.when(r.call(this,n[i])).fail(function(t){d.settings.preview_error&&d.settings.preview_error.call(d,a,t.code)})}}else this.jQuerylabel.find("span").attr({"data-title":a}).find('[class*="icon-"]').attr("class",o)}return!0}},a.prototype.reset_input=function(){return this.jQuerylabel.attr({"data-title":this.settings.btn_choose,class:""}).find("span:first").attr({"data-title":this.settings.no_file,class:""}).find('[class*="icon-"]').attr("class",this.settings.no_icon).prev("img").remove(),this.settings.no_icon||this.jQuerylabel.find('[class*="icon-"]').remove(),this.jQuerylabel.find("span").not(":first").remove(),this.jQueryelement.data("ace_input_files")&&(this.jQueryelement.removeData("ace_input_files"),this.jQueryelement.removeData("ace_input_method")),this.reset_input_field(),!1},a.prototype.reset_input_field=function(){this.jQueryelement.wrap("<form>").closest("form").get(0).reset(),this.jQueryelement.unwrap()},a.prototype.enable_reset=function(t){this.can_reset=t},a.prototype.disable=function(){this.disabled=!0,this.jQueryelement.attr("disabled","disabled").addClass("disabled")},a.prototype.enable=function(){this.disabled=!1,this.jQueryelement.removeAttr("disabled").removeClass("disabled")},a.prototype.files=function(){return t(this).data("ace_input_files")||null},a.prototype.method=function(){return t(this).data("ace_input_method")||""},a.prototype.update_settings=function(e){this.settings=t.extend({},this.settings,e),this.apply_settings()};var s=function(){var e=this,n=this.element.parentNode;t(n).on("dragenter",function(t){t.preventDefault(),t.stopPropagation()}).on("dragover",function(t){t.preventDefault(),t.stopPropagation()}).on("drop",function(t){t.preventDefault(),t.stopPropagation();var n=t.originalEvent.dataTransfer.files;if(!e.multi&&n.length>1){var l=[];l.push(n[0]),n=l}var a=!0;return e.settings.before_change&&(a=e.settings.before_change.call(e.element,n,!0)),!(!a||0==a.length)&&((a instanceof Array||i&&a instanceof FileList)&&(n=a),e.jQueryelement.data("ace_input_files",n),e.jQueryelement.data("ace_input_method","drop"),e.show_file_list(n),e.jQueryelement.triggerHandler("change",[!0]),!0)})},o=function(){var e=!0;if(this.settings.before_change&&(e=this.settings.before_change.call(this.element,this.element.files||[this.element.value],!1)),!e||0==e.length)return this.jQueryelement.data("ace_input_files")||this.reset_input_field(),!1;var n=i?e instanceof Array||e instanceof FileList?e:this.element.files:null;if(this.jQueryelement.data("ace_input_method","select"),n&&n.length>0)this.jQueryelement.data("ace_input_files",n);else{var l=t.trim(this.element.value);l&&l.length>0&&((n=[]).push(l),this.jQueryelement.data("ace_input_files",n))}return!(!n||0==n.length)&&(this.show_file_list(n),!0)},r=function(e){var n=this,i=n.jQuerylabel.find("span:last"),l=new t.Deferred,s=new FileReader;return s.onload=function(s){i.prepend("<img class='middle' style='display:none;' />");var o=i.find("img:last").get(0);t(o).one("load",function(){var s=50;"large"==n.settings.thumbnail?s=150:"fit"==n.settings.thumbnail&&(s=i.width()),i.addClass(s>50?"large":"");var r=c(o,s,e.type);if(null==r)return t(this).remove(),void l.reject({code:a.error.THUMBNAIL_FAILED});var d=r.w,u=r.h;"small"==n.settings.thumbnail&&(d=u=s),t(o).css({"background-image":"url("+r.src+")",width:d,height:u}).data("thumb",r.src).attr({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="}).show(),l.resolve()}).one("error",function(){i.find("img").remove(),l.reject({code:a.error.IMAGE_LOAD_FAILED})}),o.src=s.target.result},s.onerror=function(t){l.reject({code:a.error.FILE_LOAD_FAILED})},s.readAsDataURL(e),l.promise()},c=function(t,e,n){var i,l=t.width,a=t.height;(l>e||a>e)&&(l>a?(a=parseInt(e/l*a),l=e):(l=parseInt(e/a*l),a=e));try{var s=document.createElement("canvas");s.width=l,s.height=a,s.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,l,a),i=s.toDataURL()}catch(t){i=null}return/^data\:image\/(png|jpe?g|gif);base64,[0-9A-Za-z\+\/\=]+jQuery/.test(i)||(i=null),i?{src:i,w:l,h:a}:null};t.fn.ace_file_input=function(e,n){var i,l=this.each(function(){var l=t(this),s=l.data("ace_file_input"),o="object"==typeof e&&e;s||l.data("ace_file_input",s=new a(this,o)),"string"==typeof e&&(i=s[e](n))});return void 0===i?l:i},t.fn.ace_file_input.defaults={style:!1,no_file:"No File ...",no_icon:"icon-upload-alt",btn_choose:"Choose",btn_change:"Change",icon_remove:"icon-remove",droppable:!1,thumbnail:!1,before_change:null,before_remove:null,preview_error:null}}(window.jQuery),function(t,e){t.fn.ace_spinner=function(e){return this.each(function(){var n=e.icon_up||"js-icon-chevron-up",i=e.icon_down||"js-icon-chevron-down",l=e.btn_up_class||"",a=e.btn_down_class||"",s=e.max||999;s=(""+s).length;var o=t(this).addClass("spinner-input").css("width",10*s+"px").wrap('<div class="ace-spinner">').after('<div class="spinner-buttons btn-group btn-group-vertical">\t\t\t\t\t\t<button type="button" class="btn spinner-up btn-mini '+l+'">\t\t\t\t\t\t<i class="'+n+'"></i>\t\t\t\t\t\t</button>\t\t\t\t\t\t<button type="button" class="btn spinner-down btn-mini '+a+'">\t\t\t\t\t\t<i class="'+i+'"></i>\t\t\t\t\t\t</button>\t\t\t\t\t\t</div>').closest(".ace-spinner").spinner(e).wrapInner("<div class='input-append'></div>");t(this).on("mousewheel DOMMouseScroll",function(t){var e=t.originalEvent.detail<0||t.originalEvent.wheelDelta>0?1:-1;return o.spinner("step",e>0),o.spinner("triggerChangedEvent"),!1});var r=t(this);o.on("changed",function(){r.trigger("change")})}),this}}(window.jQuery),function(t,e){t.fn.ace_wizard=function(e){return this.each(function(){var e=t(this),n=e.find("li"),i=n.length,l=parseFloat((100/i).toFixed(1))+"%";n.css({"min-width":l,"max-width":l}),e.show().wizard();var a=e.siblings(".wizard-actions").eq(0),s=e.data("wizard");s.jQueryprevBtn.remove(),s.jQuerynextBtn.remove(),s.jQueryprevBtn=a.find(".btn-prev").eq(0).on(ace.click_event,function(){e.wizard("previous")}).attr("disabled","disabled"),s.jQuerynextBtn=a.find(".btn-next").eq(0).on(ace.click_event,function(){e.wizard("next")}).removeAttr("disabled"),s.nextText=s.jQuerynextBtn.text()}),this}}(window.jQuery),function(t,e){t.fn.ace_colorpicker=function(e){var n=t.extend({pull_right:!1,caret:!0},e);return this.each(function(){var e=t(this),i="",l="";t(this).hide().find("option").each(function(){var t="colorpick-btn";this.selected&&(t+=" selected",l=this.value),i+='<li><a class="'+t+'" href="#" style="background-color:'+this.value+';" data-color="'+this.value+'"></a></li>'}).end().on("change.ace_inner_call",function(){t(this).next().find(".btn-colorpicker").css("background-color",this.value)}).after('<div class="dropdown dropdown-colorpicker"><a data-toggle="dropdown" class="dropdown-toggle" href="#"><span class="btn-colorpicker" style="background-color:'+l+'"></span></a><ul class="dropdown-menu'+(n.caret?" dropdown-caret":"")+(n.pull_right?" pull-right":"")+'">'+i+"</ul></div>").next().find(".dropdown-menu").on(ace.click_event,function(n){var i=t(n.target);if(!i.is(".colorpick-btn"))return!1;i.closest("ul").find(".selected").removeClass("selected"),i.addClass("selected");var l=i.data("color");return e.val(l).change(),n.preventDefault(),!0})}),this}}(window.jQuery),function(t,e){t.fn.ace_tree=function(e){var n={"open-icon":"icon-folder-open","close-icon":"icon-folder-close",selectable:!0,"selected-icon":"icon-ok","unselected-icon":"tree-dot"};return n=t.extend({},n,e),this.each(function(){var e=t(this);e.html('<div class = "tree-folder" style="display:none;">\t\t\t\t<div class="tree-folder-header">\t\t\t\t\t<i class="'+n["close-icon"]+'"></i>\t\t\t\t\t<div class="tree-folder-name"></div>\t\t\t\t</div>\t\t\t\t<div class="tree-folder-content"></div>\t\t\t\t<div class="tree-loader" style="display:none"></div>\t\t\t</div>\t\t\t<div class="tree-item" style="display:none;">\t\t\t\t'+(null==n["unselected-icon"]?"":'<i class="'+n["unselected-icon"]+'"></i>')+'\t\t\t\t<div class="tree-item-name"></div>\t\t\t</div>'),e.addClass(1==n.selectable?"tree-selectable":"tree-unselectable"),e.tree(n)}),this}}(window.jQuery),function(t,e){t.fn.ace_wysiwyg=function(e,n){var i=t.extend({speech_button:!0,wysiwyg:{}},e),l=["#ac725e","#d06b64","#f83a22","#fa573c","#ff7537","#ffad46","#42d692","#16a765","#7bd148","#b3dc6c","#fbe983","#fad165","#92e1c0","#9fe1e7","#9fc6e7","#4986e7","#9a9cff","#b99aff","#c2c2c2","#cabdbf","#cca6ac","#f691b2","#cd74e6","#a47ae2","#444444"],a={font:{values:["Arial","Courier","Comic Sans MS","Helvetica","Open Sans","Tahoma","Verdana"],icon:"icon-font",title:"Font"},fontSize:{values:{5:"Huge",3:"Normal",1:"Small"},icon:"icon-text-height",title:"Font Size"},bold:{icon:"icon-bold",title:"Bold (Ctrl/Cmd+B)"},italic:{icon:"icon-italic",title:"Italic (Ctrl/Cmd+I)"},strikethrough:{icon:"icon-strikethrough",title:"Strikethrough"},underline:{icon:"icon-underline",title:"Underline"},insertunorderedlist:{icon:"icon-list-ul",title:"Bullet list"},insertorderedlist:{icon:"icon-list-ol",title:"Number list"},outdent:{icon:"icon-indent-left",title:"Reduce indent (Shift+Tab)"},indent:{icon:"icon-indent-right",title:"Indent (Tab)"},justifyleft:{icon:"icon-align-left",title:"Align Left (Ctrl/Cmd+L)"},justifycenter:{icon:"icon-align-center",title:"Center (Ctrl/Cmd+E)"},justifyright:{icon:"icon-align-right",title:"Align Right (Ctrl/Cmd+R)"},justifyfull:{icon:"icon-align-justify",title:"Justify (Ctrl/Cmd+J)"},createLink:{icon:"icon-link",title:"Hyperlink",button_text:"Add",placeholder:"URL"},unlink:{icon:"icon-unlink",title:"Remove Hyperlink"},insertImage:{icon:"icon-picture",title:"Insert picture",button_text:'<i class="icon-file"></i> Choose Image &hellip;',placeholder:"Image URL"},foreColor:{values:l,title:"Change Color"},backColor:{values:l,title:"Change Background Color"},undo:{icon:"icon-undo",title:"Undo (Ctrl/Cmd+Z)"},redo:{icon:"icon-repeat",title:"Redo (Ctrl/Cmd+Y)"}},s=i.toolbar||["font",null,"fontSize",null,"bold","italic","strikethrough","underline",null,"insertunorderedlist","insertorderedlist","outdent","indent",null,"justifyleft","justifycenter","justifyright","justifyfull",null,"createLink","unlink",null,"insertImage",null,"foreColor",null,"undo","redo"];return this.each(function(){var e,n=' <div class="wysiwyg-toolbar btn-toolbar center"> <div class="btn-group"> ';for(var l in s)if(s.hasOwnProperty(l)){var o=s[l];if(null===o){n+=' </div> <div class="btn-group"> ';continue}if("string"==typeof o&&o in a)(o=a[o]).name=s[l];else{if(!("object"==typeof o&&o.name in a))continue;o=t.extend(a[o.name],o)}var r="className"in o?o.className:"";switch(o.name){case"font":n+=' <a class="btn btn-small '+r+' dropdown-toggle" data-toggle="dropdown" title="'+o.title+'"><i class="'+o.icon+'"></i><i class="icon-angle-down icon-on-right"></i></a> ',n+=' <ul class="dropdown-menu dropdown-light">';for(var c in o.values)o.values.hasOwnProperty(c)&&(n+=' <li><a data-edit="fontName '+o.values[c]+'" style="font-family:\''+o.values[c]+"'\">"+o.values[c]+"</a></li> ");n+=" </ul>";break;case"fontSize":n+=' <a class="btn btn-small '+r+' dropdown-toggle" data-toggle="dropdown" title="'+o.title+'"><i class="'+o.icon+'"></i>&nbsp;<i class="icon-angle-down icon-on-right"></i></a> ',n+=' <ul class="dropdown-menu dropdown-light"> ';for(var d in o.values)o.values.hasOwnProperty(d)&&(n+=' <li><a data-edit="fontSize '+d+'"><font size="'+d+'">'+o.values[d]+"</font></a></li> ");n+=" </ul> ";break;case"createLink":n+=' <a class="btn btn-small '+r+' dropdown-toggle" data-toggle="dropdown" title="'+o.title+'"><i class="'+o.icon+'"></i></a> ',n+=' <div class="dropdown-menu dropdown-caret input-append pull-right">\t\t\t\t\t\t\t<input placeholder="'+o.placeholder+'" type="text" data-edit="'+o.name+'" />\t\t\t\t\t\t\t<button class="btn btn-small btn-primary" type="button">'+o.button_text+"</button>\t\t\t\t\t\t</div> ";break;case"insertImage":n+=' <a class="btn btn-small '+r+' dropdown-toggle" data-toggle="dropdown" title="'+o.title+'"><i class="'+o.icon+'"></i></a> ',n+=' <div class="dropdown-menu dropdown-caret input-append pull-right">\t\t\t\t\t\t\t<input placeholder="'+o.placeholder+'" type="text" data-edit="'+o.name+'" />\t\t\t\t\t\t\t<button class="btn btn-small btn-primary" type="button">Insert</button> ',"FileReader"in window&&(n+='<div class="center">\t\t\t\t\t\t\t\t<button class="btn btn-small btn-success wysiwyg-choose-file" type="button">'+o.button_text+'</button>\t\t\t\t\t\t\t\t<input type="file" data-edit="'+o.name+'" />\t\t\t\t\t\t\t  </div>'),n+=" </div> ";break;case"foreColor":case"backColor":n+=' <select class="hide wysiwyg_colorpicker" title="'+o.title+'"> ';for(var u in o.values)n+=' <option value="'+o.values[u]+'">'+o.values[u]+"</option> ";n+=" </select> ",n+=' <input style="display:none;" disabled class="hide" type="text" data-edit="'+o.name+'" /> ';break;default:n+=' <a class="btn btn-small '+r+'" data-edit="'+o.name+'" title="'+o.title+'"><i class="'+o.icon+'"></i></a> '}}if(n+=" </div> </div> ",(n=i.toolbar_place?i.toolbar_place.call(this,n):t(this).before(n).prev()).find("a[title]").tooltip({animation:!1}),n.find(".dropdown-menu input:not([type=file])").on(ace.click_event,function(){return!1}).on("change",function(){t(this).closest(".dropdown-menu").siblings(".dropdown-toggle").dropdown("toggle")}).on("keydown",function(e){27==e.which&&(this.value="",t(this).change())}),n.find("input[type=file]").prev().on(ace.click_event,function(e){t(this).next().click()}),n.find(".wysiwyg_colorpicker").each(function(){t(this).ace_colorpicker({pull_right:!0,caret:!1}).change(function(){t(this).nextAll("input").eq(0).val(this.value).change()}).next().find(".btn-colorpicker").tooltip({title:this.title,animation:!1})}),i.speech_button&&"onwebkitspeechchange"in(e=document.createElement("input"))){var h=t(this).offset();n.append(e),t(e).attr({type:"text","data-edit":"inserttext","x-webkit-speech":""}).addClass("wysiwyg-speech-input").css({position:"absolute"}).offset({top:h.top,left:h.left+t(this).innerWidth()-35})}else e=null;var p=t.extend({},{activeToolbarClass:"active",toolbarSelector:n},i.wysiwyg||{});t(this).wysiwyg(p)}),this}}(window.jQuery);